# Telegram-бот для отслеживания статуса домашней работы
Проект homework_bot представляет собой Telegram-бота, который обращается к API сервиса Практикум.Домашка и узнает статус домашней работы. Бот опрашивает API каждые 10 минут, проверяет статус отправленной на ревью работы и отправляет уведомление в Telegram при обновлении статуса.

## Установка и настройка
Клонировать репозиторий и перейти в него в командной строке:
```sh
git clone https://github.com/dew-77/homework_bot.git
```

```sh
cd homework_bot
```
Установите зависимости, указанные в файле requirements.txt, с помощью команды:
```sh
pip install -r requirements.txt
```

```sh
PRACTICUM_TOKEN=<ваш_токен_Практикум>
TELEGRAM_TOKEN=<ваш_токен_Telegram>
TELEGRAM_CHAT_ID=<ваш_ID_чата_Telegram>
```
Запустите бота с помощью команды
```sh
python3 homework.py
```

## Использование
После запуска бот будет опрашивать API сервиса Практикум.Домашка каждые 10 минут и проверять статус вашей домашней работы. При обновлении статуса, бот отправит соответствующее уведомление в ваш Telegram чат.

Пример сообщения:
```
-Изменился статус проверки работы "<your_name>__<homework_name>.zip". Работа проверена: у ревьюера есть замечания.
-Изменился статус проверки работы "<your_name>__<homework_name>.zip". Работа проверена: ревьюеру всё понравилось. Ура!
```


## Функционал бота
- Функция main(): содержит основную логику работы программы
- Функция check_tokens() проверяет доступность переменных окружения, которые необходимы для работы программы
- Функция get_api_answer() делает запрос к единственному эндпоинту API-сервиса. В качестве параметра в функцию передается временная метка. В случае успешного запроса возвращает ответ API, приведя его из формата JSON к типам данных Python.
- Функция check_response() проверяет ответ API на соответствие документации сервиса Практикум.Домашка
- Функция parse_status() извлекает из информации о конкретной домашней работе статус этой работы
- Функция send_message() отправляет сообщение в Telegram чат, определяемый переменной окружения *TELEGRAM_CHAT_ID*

## Логирование
Бот осуществляет **логирование** своей работы. Логи выводятся в стандартный поток *sys.stdout*, а также записываются в файл *main.log*, который появится в директории после запуска проекта. Логи содержат информацию о дате и времени события, уровне важности и описании события.

Примеры логов:
```sh
2023-06-12 12:42:09,436, DEBUG, Starting new HTTPS connection (1): practicum.yandex.ru:443
2023-06-12 19:22:20,681, DEBUG, https://practicum.yandex.ru:443 "GET /api/user_api/homework_statuses/?from_date=1686586340 HTTP/1.1" 200 42
2023-07-31 10:10:00,149, CRITICAL, One of the environment variables is missing: 'TELEGRAM_CHAT_ID'
```

События уровня ERROR не только логируются, но и пересылаются в Telegram пользователю, chat id которого указан в переменной окружения *TELEGRAM_CHAT_ID*.

## Исключения
В проекте используются как встроенные, так и собственные **исключения**, которые хранятся в файле *exceptions.py*. Использование собственных исключений помогает более точно определить и обработать ошибки в коде.

## Технологии
homework_bot разработан с использованием следующих технологий и инструментов:
- [Python](https://www.python.org/)
- [Библиотека python-telegram-bot](https://python-telegram-bot.org/)
- [Библиотека requests](https://requests.readthedocs.io/en/latest/user/quickstart/)
- [Библиотека logging](https://docs.python.org/3/library/logging.html)
- [Библиотека dotenv](https://pypi.org/project/python-dotenv/)